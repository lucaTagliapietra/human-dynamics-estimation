<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Human Dynamics Estimation: /home/travis/build/robotology/human-dynamics-estimation/human-dynamics-estimator/README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Human Dynamics Estimation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/travis/build/robotology/human-dynamics-estimation/human-dynamics-estimator/README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="human-dynamics-estimator_2_r_e_a_d_m_e_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">## YARP human-dynamics-estimator module.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;Module <span class="keywordflow">for</span> computing dynamic variables estimation starting from the data coming from </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[human-forces-provider](https:<span class="comment">//github.com/robotology-playground/human-dynamics-estimation/tree/master/human-forces-provider) module (forces6D) and </span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;from [human-state-provider](https:<span class="comment">//github.com/robotology-playground/human-dynamics-estimation/tree/master/human-state-provider) module (human kinematics data).</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;The module is structured as follow:</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;&lt;img src=<span class="stringliteral">&quot;/misc/human-dynamics-estimator.png&quot;</span>&gt;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;where:</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;- **MAP computation** is the <span class="keyword">function</span> that solves the inverse dynamics problem with a maximum-a-posteriori estimation by <span class="keyword">using</span> the Newton-Euler algorithm and </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;a set of redundant sensor measurements. It needs as input the human state (joints configuration and joints velocity), the berdy iDynTree <span class="keywordtype">object</span> </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;and the vector (y) of measurements.</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  - **y measurements**: vector of sensor measurements that includes external forces (forces6D) and data coming from accelerometres, </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  gyroscopes and DOF acceleration sensors (human kinematics data).</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  - **berdy**: iDynTree <span class="keywordtype">object</span> of [BerdyHelper](http:<span class="comment">//wiki.icub.org/codyco/dox/html/idyntree/html/classiDynTree_1_1BerdyHelper.html) class, that is a class for algorithms to compute the maximum-a-posteriori estimation of the dynamic variables </span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  of a multibody model assuming the knowledge of measurements of an arbitrary set of sensors and of the kinematics and inertial characteristics of the model. </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  Berdy initialization needs as input the human model along with the information of the related sensors and berdy options.</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;**Note**: berdy initialization is done only for the first step. At each timestamp y measurements vector is filled and MAP computation is done.</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">## Theoretical background on MAP computation with Cholesky decomposition</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;The Cholesky decomposition is a decomposition of a Hermitian, positive-definite matrix into the product of a lower triangular matrix and its conjugate transpose:</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;**A** = **L L<span class="stringliteral">&#39;**</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="stringliteral">where **L** is a lower triangular matrix with real and positive diagonal entries, and **L&#39;</span>** denotes the conjugate transpose of **L**.</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;The Cholesky decomposition is mainly used <span class="keywordflow">for</span> the numerical solution of linear equations **A x** = **b**. If **A** is symmetric and positive definite, then we can solve **A x** = **b**  by first computing the Cholesky decomposition **A** = **L L<span class="stringliteral">&#39;**, then solving **L y** = **b** for **y** by forward substitution, and finally solving **L&#39;</span> x** = **y** <span class="keywordflow">for</span> **x** by back substitution.</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;When **A** is sparse, a permutation matrix **P**, such that **L L<span class="stringliteral">&#39;** = **P&#39;</span> A P**, speeds up the linear system solution. The Cholesky factorisation of **P<span class="stringliteral">&#39; A P** tends to be sparser than that of **A**. </span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="stringliteral">**Eigen SimplicialLLT** class performs Cholesky factorisations of sparse matrices that are selfadjoint and positive definite. In order to reduce the fill-in, a symmetric permutation matrix **P** is applied prior to the factorisation.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="stringliteral">When solving for several problems having the same structure the Cholesky decomposition can be divided into two steps.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="stringliteral">First, _analyzePattern_ function performs a symbolic decomposition on the sparsity of a matrix. This function reorders the non zeros elements of the matrix, such that the factorisation step creates less fill-in. This step exploits only the structure of the matrix, hence the results of this step can be used for other linear system where the matrix has the same structure.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="stringliteral">Second, _factorize_ function performs a numeric decomposition of the matrix, that must have the same sparsity than the matrix on which the symbolic decomposition has been performed. The factors of the matrix are computed in this step. In this way, if the sparsity of the matrix remains the same, _analyzePattern_ function is run only once, while _factorize_ function should be called each time the values of the matrix change.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="stringliteral"></span></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
