<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Human Dynamics Estimation: /home/travis/build/robotology/human-dynamics-estimation/human-state-provider/src/HumanStateProvider.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Human Dynamics Estimation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f7cdf6a76c900ccaf2b76cb1d807761c.html">human-state-provider</a></li><li class="navelem"><a class="el" href="dir_b7fd2004e8e553417ddcb75d2be5ed12.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">HumanStateProvider.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_human_state_provider_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  HumanStateProvider.cpp</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  human-state-provider</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  Created by Francesco Romano on 20/02/17.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//  Copyright Â© 2017 Francesco Romano. All rights reserved.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_human_state_provider_8h.html">HumanStateProvider.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_human_state_provider_private_8h.html">HumanStateProviderPrivate.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_human_i_k_worker_pool_8h.html">HumanIKWorkerPool.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="autogenerated_2include_2thrifts_2_human_state_8h.html">thrifts/HumanState.h</a>&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="autogenerated_2include_2thrifts_2_human_state_provider_service_8h.html">thrifts/HumanStateProviderService.h</a>&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_inverse_kinematics_8h.html">human-ik/InverseKinematics.h</a>&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;iDynTree/Core/Transform.h&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;iDynTree/Core/VectorFixSize.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;iDynTree/Core/VectorDynSize.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;iDynTree/Model/Model.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;iDynTree/ModelIO/ModelLoader.h&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;iDynTree/KinDynComputations.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;iDynTree/Core/EigenHelpers.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;yarp/os/BufferedPort.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;yarp/os/LogStream.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;yarp/os/ResourceFinder.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;yarp/os/Value.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;yarp/dev/PolyDriver.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;yarp/dev/IFrameProvider.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;yarp/dev/IXsensMVNInterface.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;yarp/sig/Vector.h&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;Eigen/QR&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;stack&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">namespace </span>human {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacehuman.html#a27a5b7c3d1cbf9fbf2978fa27de8441f">createEndEffectorsPairs</a>(<span class="keyword">const</span> iDynTree::Model&amp; model,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                        <span class="keyword">const</span> std::vector&lt;yarp::experimental::dev::FrameReference&gt;&amp; humanSegments,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                        std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; &amp;framePairs,</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                        std::vector&lt;std::pair&lt;iDynTree::FrameIndex, iDynTree::FrameIndex&gt; &gt; &amp;framePairIndeces);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classhuman_1_1_human_state_provider.html#a19ee8112adbf0fed85f5555dfea53a3f">   60</a></span>&#160;    <a class="code" href="classhuman_1_1_human_state_provider.html#a19ee8112adbf0fed85f5555dfea53a3f">HumanStateProvider::HumanStateProvider</a>()</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    : m_pimpl(new <a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html">HumanStateProviderPrivate</a>()) {}</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classhuman_1_1_human_state_provider.html#a3401727e3bdf32163f2c785d2cd3c0c6">   63</a></span>&#160;    <a class="code" href="classhuman_1_1_human_state_provider.html#a3401727e3bdf32163f2c785d2cd3c0c6">HumanStateProvider::~HumanStateProvider</a>()</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keyword">delete</span> <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a> = 0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classhuman_1_1_human_state_provider.html#aec643bd69fd1821b6761c82cb0054cc6">   69</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classhuman_1_1_human_state_provider.html#aec643bd69fd1821b6761c82cb0054cc6">HumanStateProvider::getPeriod</a>()</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        assert(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a0092fb424e0b2814a0ae5e94c4736664">m_period</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classhuman_1_1_human_state_provider.html#a26a68cc49deb2a08c17e082737fab4d8">   75</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classhuman_1_1_human_state_provider.html#a26a68cc49deb2a08c17e082737fab4d8">HumanStateProvider::updateModule</a>()</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        assert(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="comment">//read from Xsens</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a745bec84bd359830d37fda53b61f9306">m_frameProvider</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">//Read goes to buffers</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        yarp::experimental::dev::IFrameProviderStatus status = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a745bec84bd359830d37fda53b61f9306">m_frameProvider</a>-&gt;getFrameInformation(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                                                                                             <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#abb7761b29225acabe41b20abf9cbba8f">velocities</a>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                                                                             <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a31f1779a5a69d53fd5bf59ff08d7b21a">accelerations</a>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">if</span> (status != yarp::experimental::dev::IFrameProviderStatusOK) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="comment">//TODO: instead of return true we should handle timeout</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="comment">//process incoming data</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="comment">//In this first part we associate the data in the buffers into the respective segments</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> index = 0; index &lt; <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>.size(); ++index) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            iDynTree::Position position(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>[index](0),</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>[index](1),</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>[index](2));</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            iDynTree::Rotation orientation = iDynTree::Rotation::RotationFromQuaternion(iDynTree::Vector4(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>[index].data() + 3, 4));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <a class="code" href="structhuman_1_1_segment_info.html">human::SegmentInfo</a> &amp;segmentInfo = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">m_segments</a>[index];</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            segmentInfo.<a class="code" href="structhuman_1_1_segment_info.html#a997cf0332429b0e30790c3d52b8e8ad8">poseWRTWorld</a> = <a class="code" href="namespacegeometry__msgs.html#a53aba9cef46f1355f71a00cf7ae6d5ac">iDynTree::Transform</a>(orientation, position);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#abb7761b29225acabe41b20abf9cbba8f">velocities</a>[index].size(); ++i) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                segmentInfo.<a class="code" href="structhuman_1_1_segment_info.html#a422991e03a6bdd30d3623af784df2f29">velocities</a>(i) = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#abb7761b29225acabe41b20abf9cbba8f">velocities</a>[index](i);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">//std::chrono::high_resolution_clock::time_point t1 = std::chrono::high_resolution_clock::now();</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a554ae0e7bcd65d8e198fb9c86b6d42df">m_ikPool</a>-&gt;runAndWait();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;       <span class="comment">// std::cerr &lt;&lt; &quot;Data process took &quot; &lt;&lt;std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now() - t1).count() &lt;&lt; &quot;ms&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// Now reconstruct everything</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="comment">//Data saved in jointsConfiguration and jointsVelocity of the various pairInfo</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// Probably this can be done also at the single thread level</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pair : <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aaa42b55c5f896f2b4c954b02bbdc9c34">m_linkPairs</a>) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordtype">size_t</span> jointIndex = 0;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pairJoint : pair.consideredJointLocations) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                Eigen::Map&lt;Eigen::VectorXd&gt; jointPositions(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#af3545d4791123014cd51cf94d226d59b">jointsConfiguration</a>.data(), <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#af3545d4791123014cd51cf94d226d59b">jointsConfiguration</a>.size());</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                jointPositions.segment(pairJoint.first, pairJoint.second) = iDynTree::toEigen(pair.jointConfigurations).segment(jointIndex, pairJoint.second);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                Eigen::Map&lt;Eigen::VectorXd&gt; jointVelocities(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aba2b78828640a74de8b521e806703878">jointsVelocity</a>.data(), <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aba2b78828640a74de8b521e806703878">jointsVelocity</a>.size());</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                jointVelocities.segment(pairJoint.first, pairJoint.second) = iDynTree::toEigen(pair.jointVelocities).segment(jointIndex, pairJoint.second);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                jointIndex += pairJoint.second;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="classhuman_1_1_human_state.html">human::HumanState</a> &amp;currentState = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#afa9ff7269fd93b05b9192f7db441a529">m_outputPort</a>.prepare();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        currentState.<a class="code" href="classhuman_1_1_human_state.html#a2d2773d6943dbfc1692c8806a8401f9b">positions</a> = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#af3545d4791123014cd51cf94d226d59b">jointsConfiguration</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        currentState.<a class="code" href="classhuman_1_1_human_state.html#a757ed55a677d841831ccb8b0895bff45">velocities</a> = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aba2b78828640a74de8b521e806703878">jointsVelocity</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a3c90bfdbe7c54c62f6bd3bbd678f0833">m_objectMutex</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a92cfb13650ac11ae39af23274d40226d">m_baseLink</a> &lt; <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">m_segments</a>.size()) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="comment">//Output base link</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                yarp::sig::Vector &amp;basePose = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>[<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a92cfb13650ac11ae39af23274d40226d">m_baseLink</a>];</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                yarp::sig::Vector &amp;baseVelocity = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#abb7761b29225acabe41b20abf9cbba8f">velocities</a>[<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a92cfb13650ac11ae39af23274d40226d">m_baseLink</a>];</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                currentState.<a class="code" href="classhuman_1_1_human_state.html#a3a58352644e4b84d57f58e2e2b49a227">baseOriginWRTGlobal</a>.<a class="code" href="classhuman_1_1_vector3.html#a20d8136bb02884e417e0ea5147d5f8d6">x</a> = basePose[0];</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                currentState.<a class="code" href="classhuman_1_1_human_state.html#a3a58352644e4b84d57f58e2e2b49a227">baseOriginWRTGlobal</a>.<a class="code" href="classhuman_1_1_vector3.html#ae55683c4288ea48e65f69d25c7bc1da6">y</a> = basePose[1];</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                currentState.<a class="code" href="classhuman_1_1_human_state.html#a3a58352644e4b84d57f58e2e2b49a227">baseOriginWRTGlobal</a>.<a class="code" href="classhuman_1_1_vector3.html#a6542ae93991f6142b34ddaf8754b7ada">z</a> = basePose[2];</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                currentState.<a class="code" href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">baseOrientationWRTGlobal</a>.<a class="code" href="classhuman_1_1_quaternion.html#a88bca9deb637961d66ad57af7581c930">w</a> = basePose[3];</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                currentState.<a class="code" href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">baseOrientationWRTGlobal</a>.<a class="code" href="classhuman_1_1_quaternion.html#a780d8533da3058f07f94704219a6cb08">imaginary</a>.<a class="code" href="classhuman_1_1_vector3.html#a20d8136bb02884e417e0ea5147d5f8d6">x</a> = basePose[4];</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                currentState.<a class="code" href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">baseOrientationWRTGlobal</a>.<a class="code" href="classhuman_1_1_quaternion.html#a780d8533da3058f07f94704219a6cb08">imaginary</a>.<a class="code" href="classhuman_1_1_vector3.html#ae55683c4288ea48e65f69d25c7bc1da6">y</a> = basePose[5];</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                currentState.<a class="code" href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">baseOrientationWRTGlobal</a>.<a class="code" href="classhuman_1_1_quaternion.html#a780d8533da3058f07f94704219a6cb08">imaginary</a>.<a class="code" href="classhuman_1_1_vector3.html#a6542ae93991f6142b34ddaf8754b7ada">z</a> = basePose[6];</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                currentState.<a class="code" href="classhuman_1_1_human_state.html#a65c8558db7c8469165cacde19d8bea2c">baseVelocityWRTGlobal</a> = baseVelocity;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#afa9ff7269fd93b05b9192f7db441a529">m_outputPort</a>.write();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classhuman_1_1_human_state_provider.html#a19422cab0e1deeb36202ec9d0132669a">  153</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classhuman_1_1_human_state_provider.html#a19422cab0e1deeb36202ec9d0132669a">HumanStateProvider::configure</a>(yarp::os::ResourceFinder &amp;rf)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        assert(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a3c90bfdbe7c54c62f6bd3bbd678f0833">m_objectMutex</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">//Name of the module</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        std::string name = rf.check(<span class="stringliteral">&quot;name&quot;</span>, yarp::os::Value(<span class="stringliteral">&quot;human-state-provider&quot;</span>), <span class="stringliteral">&quot;Checking module name&quot;</span>).asString();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        setName(name.c_str());</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="comment">//Period to compute the state</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">int</span> period = rf.check(<span class="stringliteral">&quot;period&quot;</span>, yarp::os::Value(100), <span class="stringliteral">&quot;Checking period in [ms]&quot;</span>).asInt();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a0092fb424e0b2814a0ae5e94c4736664">m_period</a> = period / 1000.0;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        yarp::os::Value falseValue; falseValue.fromString(<span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordtype">bool</span> playbackMode = rf.check(<span class="stringliteral">&quot;playback&quot;</span>, falseValue, <span class="stringliteral">&quot;Checking playback mode&quot;</span>).asBool();</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">//Open the IFrameProvider device</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        std::string remote = rf.check(<span class="stringliteral">&quot;xsens_remote_name&quot;</span>, yarp::os::Value(<span class="stringliteral">&quot;/xsens&quot;</span>), <span class="stringliteral">&quot;Checking xsens driver port prefix&quot;</span>).asString();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        std::string local = rf.check(<span class="stringliteral">&quot;xsens_local_name&quot;</span>, yarp::os::Value(<span class="stringliteral">&quot;/&quot;</span> + name + <span class="stringliteral">&quot;/xsens&quot;</span>), <span class="stringliteral">&quot;Checking xsens local port prefix&quot;</span>).asString();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        yarp::os::Property driverOptions;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (playbackMode) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            driverOptions.put(<span class="stringliteral">&quot;device&quot;</span>, <span class="stringliteral">&quot;xsens_mvn_remote_light&quot;</span>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            driverOptions.put(<span class="stringliteral">&quot;remote&quot;</span>, remote);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            driverOptions.put(<span class="stringliteral">&quot;local&quot;</span>, local);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            driverOptions.put(<span class="stringliteral">&quot;segments&quot;</span>, rf.find(<span class="stringliteral">&quot;segments&quot;</span>));</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            driverOptions.put(<span class="stringliteral">&quot;autoconnect&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            driverOptions.put(<span class="stringliteral">&quot;device&quot;</span>, <span class="stringliteral">&quot;xsens_mvn_remote&quot;</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            driverOptions.put(<span class="stringliteral">&quot;remote&quot;</span>, remote);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            driverOptions.put(<span class="stringliteral">&quot;local&quot;</span>, local);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a04ae4af77e3dff6e2fb20c8410740cd7">m_humanDriver</a>.open(driverOptions)) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            yError(<span class="stringliteral">&quot;Could not create connection to human driver&quot;</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a04ae4af77e3dff6e2fb20c8410740cd7">m_humanDriver</a>.view(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a745bec84bd359830d37fda53b61f9306">m_frameProvider</a>) || !<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a745bec84bd359830d37fda53b61f9306">m_frameProvider</a>) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            yError(<span class="stringliteral">&quot;Specified driver does not support FrameProvider interface&quot;</span>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">close</a>();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a04ae4af77e3dff6e2fb20c8410740cd7">m_humanDriver</a>.view(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a33d5d105799d63c0d5f87c46d9364532">m_frameProviderTimed</a>) || !<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a33d5d105799d63c0d5f87c46d9364532">m_frameProviderTimed</a>) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            yError(<span class="stringliteral">&quot;Specified driver does not support PreciselyTimed interface&quot;</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">close</a>();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">//get URDF model which will be needed for the IK</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (!rf.check(<span class="stringliteral">&quot;urdf_model&quot;</span>, <span class="stringliteral">&quot;Checking subject URDF file&quot;</span>)) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            yError(<span class="stringliteral">&quot;Could not find \&quot;urdf_model\&quot; parameter&quot;</span>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">close</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        std::string urdfFile = rf.findFile(rf.find(<span class="stringliteral">&quot;urdf_model&quot;</span>).asString());</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span> (urdfFile.empty()) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            yError(<span class="stringliteral">&quot;Could not find urdf file %s&quot;</span>, rf.find(<span class="stringliteral">&quot;urdf_model&quot;</span>).asString().c_str());</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">close</a>();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">//Load the full model</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        iDynTree::ModelLoader modelLoader;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">if</span> (!modelLoader.loadModelFromFile(urdfFile) || !modelLoader.isValid()) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            yError(<span class="stringliteral">&quot;Could not load URDF model %s&quot;</span>, urdfFile.c_str());</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">close</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">//Copy this model as we will change the one loaded my the loader</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        iDynTree::Model humanModel = modelLoader.model();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="comment">//get all joints</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">//If a joint has multiple dofs, it will appear multiple times</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ae9386fafd7b042c713dba525f1b80dae">m_humanJointNames</a>.resize(humanModel.getNrOfDOFs());</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">for</span> (iDynTree::JointIndex index = 0; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(index) &lt; humanModel.getNrOfJoints(); ++index) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            iDynTree::IJointPtr joint = humanModel.getJoint(index);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            std::string jointName = humanModel.getJointName(index);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordtype">size_t</span> offset = joint-&gt;getDOFsOffset();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">if</span> (offset &gt;= humanModel.getNrOfDOFs() || joint-&gt;getNrOfDOFs() == 0)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> dof = 0; dof &lt; joint-&gt;getNrOfDOFs(); ++dof) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ae9386fafd7b042c713dba525f1b80dae">m_humanJointNames</a>[offset + dof] = jointName;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">// Get the base link</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        std::string baseLink = rf.check(<span class="stringliteral">&quot;base_link&quot;</span>, yarp::os::Value(<span class="stringliteral">&quot;&quot;</span>), <span class="stringliteral">&quot;Checking base link&quot;</span>).asString();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment">//TODO: decide if we want to have also a different link and we should perform a transformation in the output phase</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">// Resize internal data</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="comment">// 1) data of size # of segments (i.e. input data)</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        std::vector&lt;yarp::experimental::dev::FrameReference&gt; segments = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a745bec84bd359830d37fda53b61f9306">m_frameProvider</a>-&gt;frames();</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a92cfb13650ac11ae39af23274d40226d">m_baseLink</a> = segments.size(); <span class="comment">//initialized to end, i.e. no base</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>.resize(segments.size());</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#abb7761b29225acabe41b20abf9cbba8f">velocities</a>.resize(segments.size());</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a31f1779a5a69d53fd5bf59ff08d7b21a">accelerations</a>.resize(segments.size());</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> index = 0; index &lt; segments.size(); ++index) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">poses</a>[index].resize(7, 0.0);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#abb7761b29225acabe41b20abf9cbba8f">velocities</a>[index].resize(6, 0.0);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a31f1779a5a69d53fd5bf59ff08d7b21a">accelerations</a>[index].resize(6, 0.0);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">// 2) output buffer: size of # Dofs</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#af3545d4791123014cd51cf94d226d59b">jointsConfiguration</a>.resize(humanModel.getNrOfDOFs());</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#af3545d4791123014cd51cf94d226d59b">jointsConfiguration</a>.zero();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aba2b78828640a74de8b521e806703878">jointsVelocity</a>.resize(humanModel.getNrOfDOFs());</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aba2b78828640a74de8b521e806703878">jointsVelocity</a>.zero();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment">// 3) segments information</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">m_segments</a>.resize(segments.size());</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> index = 0; index &lt; segments.size(); ++index) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">m_segments</a>[index].velocities.resize(6);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">m_segments</a>[index].velocities.zero();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="comment">//TODO if needed acceleration do it</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">m_segments</a>[index].segmentName = segments[index].frameName;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">if</span> (baseLink == <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">m_segments</a>[index].segmentName) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a92cfb13650ac11ae39af23274d40226d">m_baseLink</a> = index;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                yInfo(<span class="stringliteral">&quot;Using base link %s&quot;</span>, baseLink.c_str());</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a92cfb13650ac11ae39af23274d40226d">m_baseLink</a> == segments.size()) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            yInfo(<span class="stringliteral">&quot;No base link selected&quot;</span>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="comment">// 4) Get all the possible pairs composing the model</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; pairNames;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        std::vector&lt;std::pair&lt;iDynTree::FrameIndex, iDynTree::FrameIndex&gt; &gt; pairSegmentIndeces;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="namespacehuman.html#a27a5b7c3d1cbf9fbf2978fa27de8441f">createEndEffectorsPairs</a>(humanModel, segments, pairNames, pairSegmentIndeces);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aaa42b55c5f896f2b4c954b02bbdc9c34">m_linkPairs</a>.reserve(pairNames.size());</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        std::string solverName = rf.check(<span class="stringliteral">&quot;ik_linear_solver&quot;</span>, yarp::os::Value(<span class="stringliteral">&quot;&quot;</span>), <span class="stringliteral">&quot;Checking Linear solver name for IPOPT&quot;</span>).asString();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> (solverName.empty()) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            yInfo(<span class="stringliteral">&quot;Inverse Kinematics will use default IPOPT solver&quot;</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            yInfo(<span class="stringliteral">&quot;Inverse Kinematics will use the %s linear solver&quot;</span>, solverName.c_str());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> index = 0; index &lt; pairNames.size(); ++index) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <a class="code" href="structhuman_1_1_link_pair_info.html">LinkPairInfo</a> pairInfo;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a38b3cb4aa3469339815c13f58c4e96f4">parentFrameName</a> = pairNames[index].first;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#aba10bc25e6520bac611d26b3e488e40b">parentFrameSegmentsIndex</a> = pairSegmentIndeces[index].first;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#af59c67d71649439e1923817847cb848c">childFrameName</a> = pairNames[index].second;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a066365845cc1c0d1757e7ab2e801fb42">childFrameSegmentsIndex</a> = pairSegmentIndeces[index].second;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="comment">// Allocate the solver which provides also useful methods</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">if</span> (solverName.empty()) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a92d5c76730ba205e482bd52bd8a2b0c4">ikSolver</a> = std::unique_ptr&lt;InverseKinematics&gt;(<span class="keyword">new</span> <a class="code" href="classhuman_1_1_inverse_kinematics.html">InverseKinematics</a>());</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a92d5c76730ba205e482bd52bd8a2b0c4">ikSolver</a> = std::unique_ptr&lt;InverseKinematics&gt;(<span class="keyword">new</span> <a class="code" href="classhuman_1_1_inverse_kinematics.html">InverseKinematics</a>(solverName));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a92d5c76730ba205e482bd52bd8a2b0c4">ikSolver</a>-&gt;setVerbosityLevel(0);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">if</span> (!pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a92d5c76730ba205e482bd52bd8a2b0c4">ikSolver</a>-&gt;setModel(humanModel, pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a38b3cb4aa3469339815c13f58c4e96f4">parentFrameName</a>, pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#af59c67d71649439e1923817847cb848c">childFrameName</a>)) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                yWarning(<span class="stringliteral">&quot;Could not configure IK solver for frames %s,%s. Skipping pair&quot;</span>, pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a38b3cb4aa3469339815c13f58c4e96f4">parentFrameName</a>.c_str(), pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#af59c67d71649439e1923817847cb848c">childFrameName</a>.c_str());</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="comment">//now we have to obtain the information needed to map the IK solution</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="comment">//back to the total Dofs vector we need to output</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            std::vector&lt;std::string&gt; solverJoints;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a92d5c76730ba205e482bd52bd8a2b0c4">ikSolver</a>-&gt;getConsideredJoints(solverJoints);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a00ab829088ff4e5a2fea7ff928546e2b">consideredJointLocations</a>.reserve(solverJoints.size());</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">for</span> (std::vector&lt;std::string&gt;::const_iterator jointName(solverJoints.begin());</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                 jointName != solverJoints.end(); ++jointName) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                iDynTree::JointIndex jointIndex = humanModel.getJointIndex(*jointName);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <span class="keywordflow">if</span> (jointIndex == iDynTree::JOINT_INVALID_INDEX) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    yWarning(<span class="stringliteral">&quot;IK considered joint %s not found in the complete model&quot;</span>, jointName-&gt;c_str());</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                iDynTree::IJointConstPtr joint = humanModel.getJoint(jointIndex);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="comment">//Save location and length of each DoFs</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a00ab829088ff4e5a2fea7ff928546e2b">consideredJointLocations</a>.push_back(std::pair&lt;size_t, size_t&gt;(joint-&gt;getDOFsOffset(), joint-&gt;getNrOfDOFs()));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a6cd09c77892092d75f9f42856990cb75">jointConfigurations</a>.resize(solverJoints.size());</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a6cd09c77892092d75f9f42856990cb75">jointConfigurations</a>.zero();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="comment">//same size and initialization</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#ae93cab9ce847db68edf12cc5d2ec3afc">jointVelocities</a> = pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a6cd09c77892092d75f9f42856990cb75">jointConfigurations</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="comment">//Now configure the kinDynComputation objects</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            modelLoader.loadReducedModelFromFullModel(humanModel, solverJoints);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keyword">const</span> iDynTree::Model &amp;reducedModel = modelLoader.model();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="comment">//save the indeces</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="comment">//TODO: check if link or frame</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#abe97e94b79bdba4d6d7d6b116f7fd23e">parentFrameModelIndex</a> = reducedModel.getFrameIndex(pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a38b3cb4aa3469339815c13f58c4e96f4">parentFrameName</a>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#af9b7c1b4d27f0a1ac5dfcac0a02b8e38">childFrameModelIndex</a> = reducedModel.getFrameIndex(pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#af59c67d71649439e1923817847cb848c">childFrameName</a>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a85d39c7886e50ceb34ed4f83e0df58b2">kinDynComputations</a> = std::unique_ptr&lt;iDynTree::KinDynComputations&gt;(<span class="keyword">new</span> iDynTree::KinDynComputations());</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a85d39c7886e50ceb34ed4f83e0df58b2">kinDynComputations</a>-&gt;loadRobotModel(modelLoader.model());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#aab6bfab8d5d422f40d3c9ab456962529">parentJacobian</a>.resize(6, modelLoader.model().getNrOfDOFs());</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#aab6bfab8d5d422f40d3c9ab456962529">parentJacobian</a>.zero();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a56ad87f66ad1d7d69a71ddbb23e98848">childJacobian</a> = pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#aca3652f82cf7799e1277bbf017c2681e">relativeJacobian</a> = pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#aab6bfab8d5d422f40d3c9ab456962529">parentJacobian</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="comment">//overwriting the default contructed object</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#a934c53e985da29421edc45619c64f96e">jacobianDecomposition</a> = Eigen::ColPivHouseholderQR&lt;Eigen::Matrix&lt;double, Eigen::Dynamic, Eigen::Dynamic, Eigen::RowMajor&gt; &gt;(pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#aca3652f82cf7799e1277bbf017c2681e">relativeJacobian</a>.rows(), pairInfo.<a class="code" href="structhuman_1_1_link_pair_info.html#aca3652f82cf7799e1277bbf017c2681e">relativeJacobian</a>.cols());</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aaa42b55c5f896f2b4c954b02bbdc9c34">m_linkPairs</a>.push_back(std::move(pairInfo));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">//Thread pool</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        yInfo(<span class="stringliteral">&quot;Available logical threads is %u&quot;</span>, std::thread::hardware_concurrency());</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordtype">int</span> poolSize = -1;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        yarp::os::Value poolOption = rf.check(<span class="stringliteral">&quot;ikpool&quot;</span>, yarp::os::Value(-1), <span class="stringliteral">&quot;Checking size of pool&quot;</span>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> (poolOption.isString()) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">if</span> (poolOption.asString() != <span class="stringliteral">&quot;auto&quot;</span>) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                yWarning(<span class="stringliteral">&quot;Pool option not recognized. Do not using pool&quot;</span>);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                poolSize = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(std::thread::hardware_concurrency());</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            poolSize = poolOption.asInt();</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a554ae0e7bcd65d8e198fb9c86b6d42df">m_ikPool</a> = std::unique_ptr&lt;human::HumanIKWorkerPool&gt;(<span class="keyword">new</span> <a class="code" href="classhuman_1_1_human_i_k_worker_pool.html">human::HumanIKWorkerPool</a>(poolSize,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                                                                                   <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aaa42b55c5f896f2b4c954b02bbdc9c34">m_linkPairs</a>,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                                                                                   <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">m_segments</a>));</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a554ae0e7bcd65d8e198fb9c86b6d42df">m_ikPool</a>) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            yError(<span class="stringliteral">&quot;Could not create IK thread pool&quot;</span>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">close</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        std::string outputPortName = <span class="stringliteral">&quot;/&quot;</span> + getName() + <span class="stringliteral">&quot;/state:o&quot;</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#afa9ff7269fd93b05b9192f7db441a529">m_outputPort</a>.open(outputPortName)) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            yError(<span class="stringliteral">&quot;Could not open %s output port&quot;</span>, outputPortName.c_str());</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">close</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <a class="code" href="classhuman_1_1_human_state.html">human::HumanState</a> &amp;tempOutput = <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#afa9ff7269fd93b05b9192f7db441a529">m_outputPort</a>.prepare();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#a2d2773d6943dbfc1692c8806a8401f9b">positions</a>.resize(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#af3545d4791123014cd51cf94d226d59b">jointsConfiguration</a>.size());</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#a757ed55a677d841831ccb8b0895bff45">velocities</a>.resize(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">m_buffers</a>.<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#af3545d4791123014cd51cf94d226d59b">jointsConfiguration</a>.size());</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#a65c8558db7c8469165cacde19d8bea2c">baseVelocityWRTGlobal</a>.resize(6);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#a65c8558db7c8469165cacde19d8bea2c">baseVelocityWRTGlobal</a>.zero();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#a3a58352644e4b84d57f58e2e2b49a227">baseOriginWRTGlobal</a>.<a class="code" href="classhuman_1_1_vector3.html#a20d8136bb02884e417e0ea5147d5f8d6">x</a> = 0;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#a3a58352644e4b84d57f58e2e2b49a227">baseOriginWRTGlobal</a>.<a class="code" href="classhuman_1_1_vector3.html#ae55683c4288ea48e65f69d25c7bc1da6">y</a> = 0;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#a3a58352644e4b84d57f58e2e2b49a227">baseOriginWRTGlobal</a>.<a class="code" href="classhuman_1_1_vector3.html#a6542ae93991f6142b34ddaf8754b7ada">z</a> = 0;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">baseOrientationWRTGlobal</a>.<a class="code" href="classhuman_1_1_quaternion.html#a88bca9deb637961d66ad57af7581c930">w</a> = 0;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">baseOrientationWRTGlobal</a>.<a class="code" href="classhuman_1_1_quaternion.html#a780d8533da3058f07f94704219a6cb08">imaginary</a>.<a class="code" href="classhuman_1_1_vector3.html#a20d8136bb02884e417e0ea5147d5f8d6">x</a> = 0;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">baseOrientationWRTGlobal</a>.<a class="code" href="classhuman_1_1_quaternion.html#a780d8533da3058f07f94704219a6cb08">imaginary</a>.<a class="code" href="classhuman_1_1_vector3.html#ae55683c4288ea48e65f69d25c7bc1da6">y</a> = 0;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        tempOutput.<a class="code" href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">baseOrientationWRTGlobal</a>.<a class="code" href="classhuman_1_1_quaternion.html#a780d8533da3058f07f94704219a6cb08">imaginary</a>.<a class="code" href="classhuman_1_1_vector3.html#a6542ae93991f6142b34ddaf8754b7ada">z</a> = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#afa9ff7269fd93b05b9192f7db441a529">m_outputPort</a>.unprepare();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        std::string rpcPortName = <span class="stringliteral">&quot;/&quot;</span> + getName() + <span class="stringliteral">&quot;/rpc&quot;</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;yarp().attachAsServer(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aa7e89d55ec01c9ddb6207c22ccfcda6e">m_rpcPort</a>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aa7e89d55ec01c9ddb6207c22ccfcda6e">m_rpcPort</a>.open(rpcPortName)) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            yError(<span class="stringliteral">&quot;Could not open %s RPC port&quot;</span>, rpcPortName.c_str());</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">close</a>();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">  428</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">HumanStateProvider::close</a>()</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        assert(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a3c90bfdbe7c54c62f6bd3bbd678f0833">m_objectMutex</a>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="comment">//explitily clear the pool</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a554ae0e7bcd65d8e198fb9c86b6d42df">m_ikPool</a>.reset();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#afa9ff7269fd93b05b9192f7db441a529">m_outputPort</a>.close();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aa7e89d55ec01c9ddb6207c22ccfcda6e">m_rpcPort</a>.close();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">m_pimpl</a>-&gt;<a class="code" href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a04ae4af77e3dff6e2fb20c8410740cd7">m_humanDriver</a>.close();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="namespacehuman.html#a27a5b7c3d1cbf9fbf2978fa27de8441f">  443</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacehuman.html#a27a5b7c3d1cbf9fbf2978fa27de8441f">createEndEffectorsPairs</a>(<span class="keyword">const</span> iDynTree::Model&amp; model,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                        <span class="keyword">const</span> std::vector&lt;yarp::experimental::dev::FrameReference&gt;&amp; humanSegments,</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                        std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; &amp;framePairs,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                        std::vector&lt;std::pair&lt;iDynTree::FrameIndex, iDynTree::FrameIndex&gt; &gt; &amp;framePairIndeces)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">//for each element in human segments</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">//extract it from the vector (to avoid duplications)</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">//Look for it in the model and get neighbours.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        std::vector&lt;yarp::experimental::dev::FrameReference&gt; segments(humanSegments);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordtype">size_t</span> segmentCount = segments.size();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">while</span> (!segments.empty()) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            yarp::experimental::dev::FrameReference segment = segments.back();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            segments.pop_back();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            segmentCount--;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            iDynTree::LinkIndex linkIndex = model.getLinkIndex(segment.frameName);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">if</span> (linkIndex &lt; 0 || static_cast&lt;unsigned&gt;(linkIndex) &gt;= model.getNrOfLinks()) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                yWarning(<span class="stringliteral">&quot;Segment %s not found in the URDF model&quot;</span>, segment.frameName.c_str());</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="comment">//this for loop should not be necessary, but this can help keeps the backtrace short</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="comment">//as we do not assume that we can go back further that this node</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> neighbourIndex = 0; neighbourIndex &lt; model.getNrOfNeighbors(linkIndex); ++neighbourIndex) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="comment">//remember the &quot;biforcations&quot;</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                std::stack&lt;iDynTree::LinkIndex&gt; backtrace;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <span class="comment">//and the visited nodes</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                std::vector&lt;iDynTree::LinkIndex&gt; visited;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="comment">//I&#39;ve already visited the starting node</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                visited.push_back(linkIndex);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                iDynTree::Neighbor neighbour = model.getNeighbor(linkIndex, neighbourIndex);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                backtrace.push(neighbour.neighborLink);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                <span class="keywordflow">while</span> (!backtrace.empty()) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    iDynTree::LinkIndex currentLink = backtrace.top();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                    backtrace.pop();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                    <span class="comment">//add the current link to the visited</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                    visited.push_back(currentLink);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                    std::string linkName = model.getLinkName(currentLink);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                    <span class="comment">// check if this is a human segment</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    std::vector&lt;yarp::experimental::dev::FrameReference&gt;::iterator foundSegment = std::find_if(segments.begin(),</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                                                                                               segments.end(),</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                                                                                               [&amp;](yarp::experimental::dev::FrameReference&amp; frame){ <span class="keywordflow">return</span> frame.frameName == linkName; });</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    <span class="keywordflow">if</span> (foundSegment != segments.end()) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                        std::vector&lt;yarp::experimental::dev::FrameReference&gt;::difference_type foundLinkIndex = std::distance(segments.begin(), foundSegment);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                        <span class="comment">//Found! This is a segment</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                        framePairs.push_back(std::pair&lt;std::string, std::string&gt;(segment.frameName, linkName));</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                        framePairIndeces.push_back(std::pair&lt;iDynTree::FrameIndex, iDynTree::FrameIndex&gt;(segmentCount, foundLinkIndex));</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    <span class="comment">//insert all non-visited neighbours</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; model.getNrOfNeighbors(currentLink); ++i) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        iDynTree::LinkIndex link = model.getNeighbor(currentLink, i).neighborLink;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                        <span class="comment">//check if we already visited this segment</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                        <span class="keywordflow">if</span> (std::find(visited.begin(), visited.end(), link) != visited.end()) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                            <span class="comment">//Yes =&gt; skip</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                        }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        backtrace.push(link);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div>
<div class="ttc" id="_inverse_kinematics_8h_html"><div class="ttname"><a href="_inverse_kinematics_8h.html">InverseKinematics.h</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_a6cd09c77892092d75f9f42856990cb75"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#a6cd09c77892092d75f9f42856990cb75">human::LinkPairInfo::jointConfigurations</a></div><div class="ttdeci">iDynTree::VectorDynSize jointConfigurations</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00079">HumanStateProviderPrivate.h:79</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html">human::LinkPairInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00077">HumanStateProviderPrivate.h:77</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_aba10bc25e6520bac611d26b3e488e40b"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#aba10bc25e6520bac611d26b3e488e40b">human::LinkPairInfo::parentFrameSegmentsIndex</a></div><div class="ttdeci">iDynTree::FrameIndex parentFrameSegmentsIndex</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00095">HumanStateProviderPrivate.h:95</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a04ae4af77e3dff6e2fb20c8410740cd7"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a04ae4af77e3dff6e2fb20c8410740cd7">human::HumanStateProvider::HumanStateProviderPrivate::m_humanDriver</a></div><div class="ttdeci">yarp::dev::PolyDriver m_humanDriver</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00141">HumanStateProviderPrivate.h:141</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_a56ad87f66ad1d7d69a71ddbb23e98848"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#a56ad87f66ad1d7d69a71ddbb23e98848">human::LinkPairInfo::childJacobian</a></div><div class="ttdeci">iDynTree::MatrixDynSize childJacobian</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00087">HumanStateProviderPrivate.h:87</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_html_a05232d6ec4defad4cc8a45b045d2b511"><div class="ttname"><a href="classhuman_1_1_human_state_provider.html#a05232d6ec4defad4cc8a45b045d2b511">human::HumanStateProvider::m_pimpl</a></div><div class="ttdeci">HumanStateProviderPrivate * m_pimpl</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_8h_source.html#l00029">HumanStateProvider.h:29</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_html_a2d2773d6943dbfc1692c8806a8401f9b"><div class="ttname"><a href="classhuman_1_1_human_state.html#a2d2773d6943dbfc1692c8806a8401f9b">human::HumanState::positions</a></div><div class="ttdeci">yarp::sig::Vector positions</div><div class="ttdef"><b>Definition:</b> <a href="__yarp__idl___2thrifts_2humanstate_2_human_state_8h_source.html#l00027">HumanState.h:27</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_html_aea147e1fc83b8f5d9fd6c7053e5602fa"><div class="ttname"><a href="classhuman_1_1_human_state.html#aea147e1fc83b8f5d9fd6c7053e5602fa">human::HumanState::baseOrientationWRTGlobal</a></div><div class="ttdeci">Quaternion baseOrientationWRTGlobal</div><div class="ttdef"><b>Definition:</b> <a href="__yarp__idl___2thrifts_2humanstate_2_human_state_8h_source.html#l00030">HumanState.h:30</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_aa7e89d55ec01c9ddb6207c22ccfcda6e"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aa7e89d55ec01c9ddb6207c22ccfcda6e">human::HumanStateProvider::HumanStateProviderPrivate::m_rpcPort</a></div><div class="ttdeci">yarp::os::Port m_rpcPort</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00138">HumanStateProviderPrivate.h:138</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_aca3652f82cf7799e1277bbf017c2681e"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#aca3652f82cf7799e1277bbf017c2681e">human::LinkPairInfo::relativeJacobian</a></div><div class="ttdeci">iDynTree::MatrixDynSize relativeJacobian</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00088">HumanStateProviderPrivate.h:88</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_html_a3a58352644e4b84d57f58e2e2b49a227"><div class="ttname"><a href="classhuman_1_1_human_state.html#a3a58352644e4b84d57f58e2e2b49a227">human::HumanState::baseOriginWRTGlobal</a></div><div class="ttdeci">Vector3 baseOriginWRTGlobal</div><div class="ttdef"><b>Definition:</b> <a href="__yarp__idl___2thrifts_2humanstate_2_human_state_8h_source.html#l00029">HumanState.h:29</a></div></div>
<div class="ttc" id="classhuman_1_1_human_i_k_worker_pool_html"><div class="ttname"><a href="classhuman_1_1_human_i_k_worker_pool.html">human::HumanIKWorkerPool</a></div><div class="ttdef"><b>Definition:</b> <a href="_human_i_k_worker_pool_8h_source.html#l00036">HumanIKWorkerPool.h:36</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_a85d39c7886e50ceb34ed4f83e0df58b2"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#a85d39c7886e50ceb34ed4f83e0df58b2">human::LinkPairInfo::kinDynComputations</a></div><div class="ttdeci">std::unique_ptr&lt; iDynTree::KinDynComputations &gt; kinDynComputations</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00089">HumanStateProviderPrivate.h:89</a></div></div>
<div class="ttc" id="autogenerated_2include_2thrifts_2_human_state_provider_service_8h_html"><div class="ttname"><a href="autogenerated_2include_2thrifts_2_human_state_provider_service_8h.html">HumanStateProviderService.h</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_adb5c9a8bee6582e32cdf4962ac7270f5"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#adb5c9a8bee6582e32cdf4962ac7270f5">human::HumanStateProvider::HumanStateProviderPrivate::m_buffers</a></div><div class="ttdeci">struct human::HumanStateProvider::HumanStateProviderPrivate::@2 m_buffers</div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_a066365845cc1c0d1757e7ab2e801fb42"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#a066365845cc1c0d1757e7ab2e801fb42">human::LinkPairInfo::childFrameSegmentsIndex</a></div><div class="ttdeci">iDynTree::FrameIndex childFrameSegmentsIndex</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00099">HumanStateProviderPrivate.h:99</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a92cfb13650ac11ae39af23274d40226d"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a92cfb13650ac11ae39af23274d40226d">human::HumanStateProvider::HumanStateProviderPrivate::m_baseLink</a></div><div class="ttdeci">size_t m_baseLink</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00148">HumanStateProviderPrivate.h:148</a></div></div>
<div class="ttc" id="structhuman_1_1_segment_info_html_a997cf0332429b0e30790c3d52b8e8ad8"><div class="ttname"><a href="structhuman_1_1_segment_info.html#a997cf0332429b0e30790c3d52b8e8ad8">human::SegmentInfo::poseWRTWorld</a></div><div class="ttdeci">iDynTree::Transform poseWRTWorld</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00067">HumanStateProviderPrivate.h:67</a></div></div>
<div class="ttc" id="namespacehuman_html_a27a5b7c3d1cbf9fbf2978fa27de8441f"><div class="ttname"><a href="namespacehuman.html#a27a5b7c3d1cbf9fbf2978fa27de8441f">human::createEndEffectorsPairs</a></div><div class="ttdeci">static void createEndEffectorsPairs(const iDynTree::Model &amp;model, const std::vector&lt; yarp::experimental::dev::FrameReference &gt; &amp;humanSegments, std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; &amp;framePairs, std::vector&lt; std::pair&lt; iDynTree::FrameIndex, iDynTree::FrameIndex &gt; &gt; &amp;framePairIndeces)</div><div class="ttdoc">analyze model and list of segments to create all possible segment pairs </div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_8cpp_source.html#l00443">HumanStateProvider.cpp:443</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_html_a19422cab0e1deeb36202ec9d0132669a"><div class="ttname"><a href="classhuman_1_1_human_state_provider.html#a19422cab0e1deeb36202ec9d0132669a">human::HumanStateProvider::configure</a></div><div class="ttdeci">virtual bool configure(yarp::os::ResourceFinder &amp;rf)</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_8cpp_source.html#l00153">HumanStateProvider.cpp:153</a></div></div>
<div class="ttc" id="classhuman_1_1_vector3_html_a20d8136bb02884e417e0ea5147d5f8d6"><div class="ttname"><a href="classhuman_1_1_vector3.html#a20d8136bb02884e417e0ea5147d5f8d6">human::Vector3::x</a></div><div class="ttdeci">double x</div><div class="ttdef"><b>Definition:</b> <a href="human-state-provider_2__yarp__idl___2thrifts_2humanstate_2_vector3_8h_source.html#l00021">Vector3.h:21</a></div></div>
<div class="ttc" id="classhuman_1_1_quaternion_html_a780d8533da3058f07f94704219a6cb08"><div class="ttname"><a href="classhuman_1_1_quaternion.html#a780d8533da3058f07f94704219a6cb08">human::Quaternion::imaginary</a></div><div class="ttdeci">Vector3 imaginary</div><div class="ttdef"><b>Definition:</b> <a href="human-state-provider_2__yarp__idl___2thrifts_2humanstate_2_quaternion_8h_source.html#l00023">Quaternion.h:23</a></div></div>
<div class="ttc" id="classhuman_1_1_inverse_kinematics_html"><div class="ttname"><a href="classhuman_1_1_inverse_kinematics.html">human::InverseKinematics</a></div><div class="ttdef"><b>Definition:</b> <a href="_inverse_kinematics_8h_source.html#l00021">InverseKinematics.h:21</a></div></div>
<div class="ttc" id="structhuman_1_1_segment_info_html_a422991e03a6bdd30d3623af784df2f29"><div class="ttname"><a href="structhuman_1_1_segment_info.html#a422991e03a6bdd30d3623af784df2f29">human::SegmentInfo::velocities</a></div><div class="ttdeci">iDynTree::VectorDynSize velocities</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00068">HumanStateProviderPrivate.h:68</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_af59c67d71649439e1923817847cb848c"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#af59c67d71649439e1923817847cb848c">human::LinkPairInfo::childFrameName</a></div><div class="ttdeci">std::string childFrameName</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00097">HumanStateProviderPrivate.h:97</a></div></div>
<div class="ttc" id="_human_state_provider_private_8h_html"><div class="ttname"><a href="_human_state_provider_private_8h.html">HumanStateProviderPrivate.h</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_a934c53e985da29421edc45619c64f96e"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#a934c53e985da29421edc45619c64f96e">human::LinkPairInfo::jacobianDecomposition</a></div><div class="ttdeci">Eigen::ColPivHouseholderQR&lt; Eigen::Matrix&lt; double, Eigen::Dynamic, Eigen::Dynamic, Eigen::RowMajor &gt; &gt; jacobianDecomposition</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00090">HumanStateProviderPrivate.h:90</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_html_a757ed55a677d841831ccb8b0895bff45"><div class="ttname"><a href="classhuman_1_1_human_state.html#a757ed55a677d841831ccb8b0895bff45">human::HumanState::velocities</a></div><div class="ttdeci">yarp::sig::Vector velocities</div><div class="ttdef"><b>Definition:</b> <a href="__yarp__idl___2thrifts_2humanstate_2_human_state_8h_source.html#l00028">HumanState.h:28</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_ae9386fafd7b042c713dba525f1b80dae"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ae9386fafd7b042c713dba525f1b80dae">human::HumanStateProvider::HumanStateProviderPrivate::m_humanJointNames</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_humanJointNames</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00139">HumanStateProviderPrivate.h:139</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_html_a19ee8112adbf0fed85f5555dfea53a3f"><div class="ttname"><a href="classhuman_1_1_human_state_provider.html#a19ee8112adbf0fed85f5555dfea53a3f">human::HumanStateProvider::HumanStateProvider</a></div><div class="ttdeci">HumanStateProvider()</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_8cpp_source.html#l00060">HumanStateProvider.cpp:60</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a33d5d105799d63c0d5f87c46d9364532"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a33d5d105799d63c0d5f87c46d9364532">human::HumanStateProvider::HumanStateProviderPrivate::m_frameProviderTimed</a></div><div class="ttdeci">yarp::dev::IPreciselyTimed * m_frameProviderTimed</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00143">HumanStateProviderPrivate.h:143</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a745bec84bd359830d37fda53b61f9306"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a745bec84bd359830d37fda53b61f9306">human::HumanStateProvider::HumanStateProviderPrivate::m_frameProvider</a></div><div class="ttdeci">yarp::experimental::dev::IFrameProvider * m_frameProvider</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00142">HumanStateProviderPrivate.h:142</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a0092fb424e0b2814a0ae5e94c4736664"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a0092fb424e0b2814a0ae5e94c4736664">human::HumanStateProvider::HumanStateProviderPrivate::m_period</a></div><div class="ttdeci">double m_period</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00135">HumanStateProviderPrivate.h:135</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_a38b3cb4aa3469339815c13f58c4e96f4"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#a38b3cb4aa3469339815c13f58c4e96f4">human::LinkPairInfo::parentFrameName</a></div><div class="ttdeci">std::string parentFrameName</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00093">HumanStateProviderPrivate.h:93</a></div></div>
<div class="ttc" id="_human_state_provider_8h_html"><div class="ttname"><a href="_human_state_provider_8h.html">HumanStateProvider.h</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_html_a26a68cc49deb2a08c17e082737fab4d8"><div class="ttname"><a href="classhuman_1_1_human_state_provider.html#a26a68cc49deb2a08c17e082737fab4d8">human::HumanStateProvider::updateModule</a></div><div class="ttdeci">virtual bool updateModule()</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_8cpp_source.html#l00075">HumanStateProvider.cpp:75</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_html_a3401727e3bdf32163f2c785d2cd3c0c6"><div class="ttname"><a href="classhuman_1_1_human_state_provider.html#a3401727e3bdf32163f2c785d2cd3c0c6">human::HumanStateProvider::~HumanStateProvider</a></div><div class="ttdeci">virtual ~HumanStateProvider()</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_8cpp_source.html#l00063">HumanStateProvider.cpp:63</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_html"><div class="ttname"><a href="classhuman_1_1_human_state.html">human::HumanState</a></div><div class="ttdef"><b>Definition:</b> <a href="__yarp__idl___2thrifts_2humanstate_2_human_state_8h_source.html#l00024">HumanState.h:24</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_aab6bfab8d5d422f40d3c9ab456962529"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#aab6bfab8d5d422f40d3c9ab456962529">human::LinkPairInfo::parentJacobian</a></div><div class="ttdeci">iDynTree::MatrixDynSize parentJacobian</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00086">HumanStateProviderPrivate.h:86</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_html_a0fe61db59f127cf7f2cbcfb5c1d81d1e"><div class="ttname"><a href="classhuman_1_1_human_state_provider.html#a0fe61db59f127cf7f2cbcfb5c1d81d1e">human::HumanStateProvider::close</a></div><div class="ttdeci">virtual bool close()</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_8cpp_source.html#l00428">HumanStateProvider.cpp:428</a></div></div>
<div class="ttc" id="classhuman_1_1_vector3_html_a6542ae93991f6142b34ddaf8754b7ada"><div class="ttname"><a href="classhuman_1_1_vector3.html#a6542ae93991f6142b34ddaf8754b7ada">human::Vector3::z</a></div><div class="ttdeci">double z</div><div class="ttdef"><b>Definition:</b> <a href="human-state-provider_2__yarp__idl___2thrifts_2humanstate_2_vector3_8h_source.html#l00023">Vector3.h:23</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_a00ab829088ff4e5a2fea7ff928546e2b"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#a00ab829088ff4e5a2fea7ff928546e2b">human::LinkPairInfo::consideredJointLocations</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; size_t, size_t &gt; &gt; consideredJointLocations</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00101">HumanStateProviderPrivate.h:101</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a31f1779a5a69d53fd5bf59ff08d7b21a"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a31f1779a5a69d53fd5bf59ff08d7b21a">human::HumanStateProvider::HumanStateProviderPrivate::accelerations</a></div><div class="ttdeci">std::vector&lt; yarp::sig::Vector &gt; accelerations</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00155">HumanStateProviderPrivate.h:155</a></div></div>
<div class="ttc" id="namespacegeometry__msgs_html_a53aba9cef46f1355f71a00cf7ae6d5ac"><div class="ttname"><a href="namespacegeometry__msgs.html#a53aba9cef46f1355f71a00cf7ae6d5ac">geometry_msgs::Transform</a></div><div class="ttdeci">geometry_msgs_Transform Transform</div><div class="ttdef"><b>Definition:</b> <a href="__yarp__idl___2msgs_2geometry__msgs_2_transform_8h_source.html#l00008">Transform.h:8</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a565d4048c3b57b2eda9fcf09c0a7dc45"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a565d4048c3b57b2eda9fcf09c0a7dc45">human::HumanStateProvider::HumanStateProviderPrivate::poses</a></div><div class="ttdeci">std::vector&lt; yarp::sig::Vector &gt; poses</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00153">HumanStateProviderPrivate.h:153</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_aba2b78828640a74de8b521e806703878"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aba2b78828640a74de8b521e806703878">human::HumanStateProvider::HumanStateProviderPrivate::jointsVelocity</a></div><div class="ttdeci">yarp::sig::Vector jointsVelocity</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00160">HumanStateProviderPrivate.h:160</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_html_aec643bd69fd1821b6761c82cb0054cc6"><div class="ttname"><a href="classhuman_1_1_human_state_provider.html#aec643bd69fd1821b6761c82cb0054cc6">human::HumanStateProvider::getPeriod</a></div><div class="ttdeci">virtual double getPeriod()</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_8cpp_source.html#l00069">HumanStateProvider.cpp:69</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_ab3e2a1b25731baff32abd1e887568c1a"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#ab3e2a1b25731baff32abd1e887568c1a">human::HumanStateProvider::HumanStateProviderPrivate::m_segments</a></div><div class="ttdeci">std::vector&lt; human::SegmentInfo &gt; m_segments</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00146">HumanStateProviderPrivate.h:146</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_a92d5c76730ba205e482bd52bd8a2b0c4"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#a92d5c76730ba205e482bd52bd8a2b0c4">human::LinkPairInfo::ikSolver</a></div><div class="ttdeci">std::unique_ptr&lt; human::InverseKinematics &gt; ikSolver</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00083">HumanStateProviderPrivate.h:83</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_af9b7c1b4d27f0a1ac5dfcac0a02b8e38"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#af9b7c1b4d27f0a1ac5dfcac0a02b8e38">human::LinkPairInfo::childFrameModelIndex</a></div><div class="ttdeci">iDynTree::FrameIndex childFrameModelIndex</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00098">HumanStateProviderPrivate.h:98</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a554ae0e7bcd65d8e198fb9c86b6d42df"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a554ae0e7bcd65d8e198fb9c86b6d42df">human::HumanStateProvider::HumanStateProviderPrivate::m_ikPool</a></div><div class="ttdeci">std::unique_ptr&lt; human::HumanIKWorkerPool &gt; m_ikPool</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00163">HumanStateProviderPrivate.h:163</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_ae93cab9ce847db68edf12cc5d2ec3afc"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#ae93cab9ce847db68edf12cc5d2ec3afc">human::LinkPairInfo::jointVelocities</a></div><div class="ttdeci">iDynTree::VectorDynSize jointVelocities</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00080">HumanStateProviderPrivate.h:80</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_afa9ff7269fd93b05b9192f7db441a529"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#afa9ff7269fd93b05b9192f7db441a529">human::HumanStateProvider::HumanStateProviderPrivate::m_outputPort</a></div><div class="ttdeci">yarp::os::BufferedPort&lt; human::HumanState &gt; m_outputPort</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00137">HumanStateProviderPrivate.h:137</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_aaa42b55c5f896f2b4c954b02bbdc9c34"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#aaa42b55c5f896f2b4c954b02bbdc9c34">human::HumanStateProvider::HumanStateProviderPrivate::m_linkPairs</a></div><div class="ttdeci">std::vector&lt; human::LinkPairInfo &gt; m_linkPairs</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00145">HumanStateProviderPrivate.h:145</a></div></div>
<div class="ttc" id="classhuman_1_1_quaternion_html_a88bca9deb637961d66ad57af7581c930"><div class="ttname"><a href="classhuman_1_1_quaternion.html#a88bca9deb637961d66ad57af7581c930">human::Quaternion::w</a></div><div class="ttdeci">double w</div><div class="ttdef"><b>Definition:</b> <a href="human-state-provider_2__yarp__idl___2thrifts_2humanstate_2_quaternion_8h_source.html#l00022">Quaternion.h:22</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_af3545d4791123014cd51cf94d226d59b"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#af3545d4791123014cd51cf94d226d59b">human::HumanStateProvider::HumanStateProviderPrivate::jointsConfiguration</a></div><div class="ttdeci">yarp::sig::Vector jointsConfiguration</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00159">HumanStateProviderPrivate.h:159</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_a3c90bfdbe7c54c62f6bd3bbd678f0833"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#a3c90bfdbe7c54c62f6bd3bbd678f0833">human::HumanStateProvider::HumanStateProviderPrivate::m_objectMutex</a></div><div class="ttdeci">std::mutex m_objectMutex</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00165">HumanStateProviderPrivate.h:165</a></div></div>
<div class="ttc" id="structhuman_1_1_link_pair_info_html_abe97e94b79bdba4d6d7d6b116f7fd23e"><div class="ttname"><a href="structhuman_1_1_link_pair_info.html#abe97e94b79bdba4d6d7d6b116f7fd23e">human::LinkPairInfo::parentFrameModelIndex</a></div><div class="ttdeci">iDynTree::FrameIndex parentFrameModelIndex</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00094">HumanStateProviderPrivate.h:94</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html_abb7761b29225acabe41b20abf9cbba8f"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html#abb7761b29225acabe41b20abf9cbba8f">human::HumanStateProvider::HumanStateProviderPrivate::velocities</a></div><div class="ttdeci">std::vector&lt; yarp::sig::Vector &gt; velocities</div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00154">HumanStateProviderPrivate.h:154</a></div></div>
<div class="ttc" id="_human_i_k_worker_pool_8h_html"><div class="ttname"><a href="_human_i_k_worker_pool_8h.html">HumanIKWorkerPool.h</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_html_a65c8558db7c8469165cacde19d8bea2c"><div class="ttname"><a href="classhuman_1_1_human_state.html#a65c8558db7c8469165cacde19d8bea2c">human::HumanState::baseVelocityWRTGlobal</a></div><div class="ttdeci">yarp::sig::Vector baseVelocityWRTGlobal</div><div class="ttdef"><b>Definition:</b> <a href="__yarp__idl___2thrifts_2humanstate_2_human_state_8h_source.html#l00031">HumanState.h:31</a></div></div>
<div class="ttc" id="classhuman_1_1_vector3_html_ae55683c4288ea48e65f69d25c7bc1da6"><div class="ttname"><a href="classhuman_1_1_vector3.html#ae55683c4288ea48e65f69d25c7bc1da6">human::Vector3::y</a></div><div class="ttdeci">double y</div><div class="ttdef"><b>Definition:</b> <a href="human-state-provider_2__yarp__idl___2thrifts_2humanstate_2_vector3_8h_source.html#l00022">Vector3.h:22</a></div></div>
<div class="ttc" id="structhuman_1_1_segment_info_html"><div class="ttname"><a href="structhuman_1_1_segment_info.html">human::SegmentInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00064">HumanStateProviderPrivate.h:64</a></div></div>
<div class="ttc" id="classhuman_1_1_human_state_provider_1_1_human_state_provider_private_html"><div class="ttname"><a href="classhuman_1_1_human_state_provider_1_1_human_state_provider_private.html">human::HumanStateProvider::HumanStateProviderPrivate</a></div><div class="ttdef"><b>Definition:</b> <a href="_human_state_provider_private_8h_source.html#l00131">HumanStateProviderPrivate.h:131</a></div></div>
<div class="ttc" id="autogenerated_2include_2thrifts_2_human_state_8h_html"><div class="ttname"><a href="autogenerated_2include_2thrifts_2_human_state_8h.html">HumanState.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
